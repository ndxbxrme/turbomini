<!doctype html>
<html>
  <body>
    <page></page>
    <button id="add">Add</button>
    <button id="remove">Remove</button>
    <script type="module">
      import { TurboMini } from '../../src/turbomini.js';
      const app = TurboMini('/examples/04-partials-and-each');
      app.template('header', '<h1>Items</h1>');
      app.template('item', '<li class="item">{{this}}</li>');
      app.template('default', `{{> header}}\n{{#if items.length}}<ul id="list">{{#each items as item}}{{> item item}}{{/each}}</ul>{{else}}<p id="empty">No items</p>{{/if}}`);
      const store = { items: [] };
      app.controller('default', () => store);
      document.addEventListener('click', e => {
        if (e.target.id === 'add') { store.items.push('item ' + (store.items.length + 1)); app.invalidate(); }
        if (e.target.id === 'remove') { store.items.pop(); app.invalidate(); }
      });
      app.start();
      window.app = app;
    </script>
  </body>
</html>
